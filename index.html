<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="율무's 공식홈페이지">
    <meta name="keywords" content="율무, 강아지, 율무 유튜브, 반려동물, 유기견, 리트리버, 진돗개, 진트리버, 진도믹스">
    <meta name="author" content="율무인데요">
    <title>율무랑 비밀친구하기</title>
    
    <!-- Open Graph / Facebook / Instagram 공유 메타태그 -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.yulmoo.site">
    <meta property="og:title" content="율무랑 비밀친구하기">
    <meta property="og:description" content="율무's 공식 홈페이지">
    <meta property="og:image" content="https://www.yulmoo.site/yulmoo-share.png">
    <meta property="og:image:secure_url" content="https://www.yulmoo.site/yulmoo-share.png">
    <meta property="og:image:type" content="image/png">
    <meta property="og:site_name" content="율무인데요">
    
    <!-- Twitter 카드 메타태그 -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="율무랑 비밀친구하기">
    <meta name="twitter:description" content="율무's 공식 홈페이지">
    <meta name="twitter:image" content="https://www.yulmoo.site/yulmoo-share.png">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Supabase -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QVRVLYSZC2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-QVRVLYSZC2');
    </script>
    <!-- 팝업 스타일 (PC/모바일 반응형) -->
    <style>
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.6);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            padding: 15px;
            box-sizing: border-box;
        }
        .popup-overlay.show { display: flex; }
        .popup-box {
            position: relative;
            background: #fff;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
        }
        .popup-close {
            position: absolute;
            top: 12px;
            right: 12px;
            width: 36px;
            height: 36px;
            border: none;
            background: rgba(0,0,0,0.5);
            color: #fff;
            border-radius: 50%;
            cursor: pointer;
            z-index: 2;
            font-size: 1.2rem;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .popup-close:hover { background: rgba(0,0,0,0.7); }
        .popup-image-wrap {
            display: block;
            line-height: 0;
            flex: 1;
            min-height: 0;
        }
        .popup-image-wrap img {
            width: 100%;
            height: auto;
            max-height: 70vh;
            object-fit: contain;
            vertical-align: top;
        }
        .popup-footer {
            padding: 14px 16px;
            border-top: 1px solid #eee;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            flex-wrap: wrap;
        }
        .popup-dont-show {
            font-size: 0.9rem;
            color: #666;
            cursor: pointer;
            user-select: none;
        }
        .popup-dont-show input { margin-right: 6px; vertical-align: middle; }
        @media (max-width: 480px) {
            .popup-box { max-width: 92vw; max-height: 85vh; }
            .popup-image-wrap img { max-height: 60vh; }
            .popup-footer { padding: 12px; }
        }
    </style>
</head>
<body>
    <!-- 메인 팝업 (설정 시에만 표시) -->
    <div class="popup-overlay" id="mainPopup">
        <div class="popup-box">
            <button type="button" class="popup-close" id="popupClose" aria-label="닫기">&times;</button>
            <a href="#" class="popup-image-wrap" id="popupImageLink" target="_blank" rel="noopener noreferrer">
                <img id="popupImage" src="" alt="팝업" style="display:none;">
            </a>
            <div class="popup-footer">
                <label class="popup-dont-show">
                    <input type="checkbox" id="popupDontShow24"> 24시간 동안 보지 않기
                </label>
            </div>
        </div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <img src="yulmoo-dog.png" alt="율무" class="nav-logo-img">
                <span class="nav-logo-text">율무인데요</span>
            </div>
            <div class="nav-menu">
                <a href="#home" class="nav-link active">홈</a>
                <a href="#videos" class="nav-link">영상</a>
                <a href="#gallery" class="nav-link">갤러리</a>
                <a href="#contact" class="nav-link">문의</a>
            </div>
            <div class="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Action Buttons -->
    <div class="action-buttons">
        <button class="action-btn share-btn" id="shareBtn" title="공유하기">
            <i class="fas fa-share-alt" style="font-family: 'Font Awesome 6 Free'; font-weight: 900;"></i>
        </button>
        <a href="/contact.html" class="action-btn contact-btn" title="문의하기">
            <i class="fas fa-envelope"></i>
        </a>
    </div>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <!-- 동영상 배경 -->
        <div class="hero-video-background">
            <video class="hero-video" autoplay muted loop playsinline preload="metadata" webkit-playsinline="true" x5-playsinline="true">
                <source src="Backgroundvod.mp4" type="video/mp4" media="(min-width: 769px)">
                <source src="vodmobile.mp4" type="video/mp4">
            </video>
            <div class="hero-video-overlay"></div>
        </div>
        
        <div class="hero-container">
            <div class="hero-content">
                <h1 class="hero-title">
                    <span class="hero-title-main">안녕하세율 <img src="yulmoo-hero.png" alt="율무" class="hero-icon"></span>
                </h1>
                <p class="hero-description">
                    매일매일 행복한 율무네 일상,<span class="mobile-break"></span> <span class="pink-subscribe">구독</span>으로 빠르게 만나보세요!
                </p>
                <div class="hero-stats">
                    <div class="stats-total">Total</div>
                    <div class="stats-row">
                        <div class="stat-item">
                            <span class="stat-number">10K+</span>
                            <span class="stat-label">구독자</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">50+</span>
                            <span class="stat-label">영상</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">1M+</span>
                            <span class="stat-label">조회수</span>
                        </div>
                        <div class="mobile-hero-image">
                            <img src="yulmoo-dog.png" alt="율무" class="mobile-hero-img">
                        </div>
                    </div>
                </div>
            </div>
            <div class="hero-visual">
                <div class="hero-image-container">
                    <img src="yulmoo-dog.png" alt="율무" class="hero-image">
                    <div class="hero-image-glow"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Popular Videos Section -->
    <section class="video-section" id="videos">
        <div class="container">
            <div class="section-header">
                <div class="social-buttons-container">
                    <a href="https://www.youtube.com/@Iam_Yulmoo?sub_confirmation=1" class="social-btn youtube-btn" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-youtube"></i>
                        <span>율무인데요 유튜브</span>
                    </a>
                    <a href="https://www.instagram.com/_iam_yulmoo" class="social-btn instagram-btn" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-instagram"></i>
                        <span>율무인데요 인스타그램</span>
                    </a>
                    <a href="https://www.tiktok.com/@iam_yulmoo" class="social-btn tiktok-btn" target="_blank" rel="noopener noreferrer">
                        <i class="fab fa-tiktok"></i>
                        <span>율무인데요 TIKTOK</span>
                    </a>
                </div>
                <a href="/fortune.html" class="fortune-btn" id="fortuneBtn">
                    <i class="fas fa-paw"></i>
                    <span>율무 엉덩이 때려서 오늘의 운세 확인하기</span>
                    <i class="fas fa-paw"></i>
                </a>
                <h2 class="section-title">인기 영상</h2>
                <p class="section-subtitle">가장 많이 사랑받은 율무의 일상</p>
            </div>
            
            <div class="video-grid">
                <div class="video-card">
                    <div class="video-thumbnail">
                        <div class="video-placeholder">
                            <i class="fas fa-play"></i>
                            <span>인기영상 1</span>
                        </div>
                        <div class="video-duration">3:24</div>
                        <div class="video-views">1.2M 조회</div>
                    </div>
                    <div class="video-info">
                        <h3 class="video-title">율무의 첫 산책</h3>
                        <div class="video-stats">
                            <div class="video-stat-row">
                                <div class="video-stat-item">
                                    <i class="fas fa-heart"></i>
                                    <span>12.5K</span>
                                </div>
                                <div class="video-stat-item">
                                    <i class="fas fa-comment"></i>
                                    <span>234</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="video-card">
                    <div class="video-thumbnail">
                        <div class="video-placeholder">
                            <i class="fas fa-play"></i>
                            <span>인기영상 2</span>
                        </div>
                        <div class="video-duration">2:15</div>
                        <div class="video-views">890K 조회</div>
                    </div>
                    <div class="video-info">
                        <h3 class="video-title">율무의 점심시간</h3>
                        <div class="video-stats">
                            <div class="video-stat-row">
                                <div class="video-stat-item">
                                    <i class="fas fa-heart"></i>
                                    <span>8.9K</span>
                                </div>
                                <div class="video-stat-item">
                                    <i class="fas fa-comment"></i>
                                    <span>156</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="video-card">
                    <div class="video-thumbnail">
                        <div class="video-placeholder">
                            <i class="fas fa-play"></i>
                            <span>인기영상 3</span>
                        </div>
                        <div class="video-duration">4:12</div>
                        <div class="video-views">756K 조회</div>
                    </div>
                    <div class="video-info">
                        <h3 class="video-title">율무의 놀이시간</h3>
                        <div class="video-stats">
                            <div class="video-stat-row">
                                <div class="video-stat-item">
                                    <i class="fas fa-heart"></i>
                                    <span>7.2K</span>
                                </div>
                                <div class="video-stat-item">
                                    <i class="fas fa-comment"></i>
                                    <span>89</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

        <!-- Coupang Partners Section -->
        <section class="coupang-section">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">[광고] 율무의 꿀템추천</h2>
                    <p class="section-subtitle">직접 율무가 사용해본 찐템 후기!!</p>
                </div>
                
                <div class="coupang-ads-container" id="honeyItemsContainer">
                    <!-- 율무의 꿀템추천 6개: /api/honey-items 로 동적 렌더링 -->
                </div>
            </div>
        </section>

    <!-- Gallery Section -->
    <section class="gallery-section" id="gallery">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title">율무 갤러리</h2>
                <p class="section-subtitle">율무의 다양한 모습을 담았습니다!</p>
            </div>
            
            <div class="gallery-content">
                <div class="gallery-action">
                    <a href="/gallery.html" class="gallery-btn">
                        <i class="fas fa-images"></i>
                        <span>갤러리 보러가기</span>
                    </a>
                </div>
                
                <div class="gallery-preview">
                    <div class="gallery-grid">
                        <div class="gallery-item">
                            <div class="gallery-placeholder">
                                <i class="fas fa-camera"></i>
                                <span>갤러리 1</span>
                            </div>
                        </div>
                        <div class="gallery-item">
                            <div class="gallery-placeholder">
                                <i class="fas fa-camera"></i>
                                <span>갤러리 2</span>
                            </div>
                        </div>
                        <div class="gallery-item">
                            <div class="gallery-placeholder">
                                <i class="fas fa-camera"></i>
                                <span>갤러리 3</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

        <!-- Contact Section -->
        <section class="contact-section" id="contact">
            <div class="container">
                <div class="contact-content">
                    <h2 class="contact-title">문의하기</h2>
                <p class="contact-description">
                    율무에 대한 문의나 제안이 있으시면<br>언제든 연락해주세요!
                </p>
                <div class="contact-actions">
                    <a href="/contact.html" class="contact-btn">
                        <i class="fas fa-envelope"></i>
                        <div class="btn-content">
                            <span class="btn-text">이메일 보내기</span>
                            <span class="btn-subtext">iamyulmoo@naver.com</span>
                        </div>
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <img src="yulmoo-dog.png" alt="율무" class="footer-logo-img">
                    <span class="footer-logo-text">율무인데요</span>
                </div>
                <p class="footer-text">
                    <span class="copyright-text">&copy; 2025 율무인데요. All rights reserved.</span><br>
                    (모든 플랫폼에 1일 1영상씩 업로드 됩니다.)
                </p>
            </div>
            <!-- Visitor Counter -->
            <div class="visitor-counter">
                <div class="visitor-stats">
                    <div class="visitor-stat">
                        <span class="visitor-label">TOTAL</span>
                        <span class="visitor-number" id="totalVisitors">0</span>
                    </div>
                    <div class="visitor-stat">
                        <span class="visitor-label">TODAY</span>
                        <span class="visitor-number" id="todayVisitors">0</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop" title="맨 위로">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- JavaScript -->
    <script src="script.js"></script>
    
    <!-- Mobile Video Scroll Fix -->
    <script>
        // 모바일에서 첫 번째 영상이 완전히 보이도록 스크롤 조정
        function adjustVideoScroll() {
            if (window.innerWidth <= 480) {
                const videoGrids = document.querySelectorAll('.video-grid');
                videoGrids.forEach(grid => {
                    // 스크롤을 맨 왼쪽으로 설정 (첫 번째 영상이 완전히 보이도록)
                    grid.scrollLeft = 0;
                });
            }
        }
        
        // 페이지 로드 시 실행
        document.addEventListener('DOMContentLoaded', function() {
            // 약간의 지연을 두고 실행 (레이아웃이 완전히 로드된 후)
            setTimeout(adjustVideoScroll, 100);
        });
        
        // 화면 크기 변경 시 실행
        window.addEventListener('resize', function() {
            setTimeout(adjustVideoScroll, 100);
        });
        
        // 스크롤 이벤트 제거 (자연스러운 스크롤 허용)
        document.addEventListener('DOMContentLoaded', function() {
            if (window.innerWidth <= 480) {
                const videoGrids = document.querySelectorAll('.video-grid');
                videoGrids.forEach(grid => {
                    // 스크롤 이벤트 리스너 제거하여 자연스러운 스크롤 허용
                    grid.style.scrollBehavior = 'smooth';
                });
            }
        });
    </script>
    
    <!-- 팝업 로직: 설정 조회, 기간/24시간 보지않기, admin off→on 시 다시 표시 -->
    <script>
        (function() {
            var POPUP_HIDE_KEY = 'popup_hide_until';
            var POPUP_VERSION_KEY = 'popup_version';
            var overlay = document.getElementById('mainPopup');
            var popupImage = document.getElementById('popupImage');
            var popupImageLink = document.getElementById('popupImageLink');
            var popupClose = document.getElementById('popupClose');
            var popupDontShow24 = document.getElementById('popupDontShow24');
            var currentPopupVersion = null;

            function getTodayKST() {
                var now = new Date();
                var kst = new Date(now.getTime() + (9 * 60 * 60 * 1000));
                var y = kst.getUTCFullYear();
                var m = String(kst.getUTCMonth() + 1).padStart(2, '0');
                var d = String(kst.getUTCDate()).padStart(2, '0');
                return y + '-' + m + '-' + d;
            }

            function shouldShowPopup(settings) {
                if (!settings || !settings.enabled || !settings.image_url) return false;
                var today = getTodayKST();
                if (settings.start_date && today < settings.start_date) return false;
                if (settings.end_date && today > settings.end_date) return false;
                var storedVersion = localStorage.getItem(POPUP_VERSION_KEY);
                if (settings.version != null && storedVersion !== null && String(settings.version) !== storedVersion) return true;
                var hideUntil = localStorage.getItem(POPUP_HIDE_KEY);
                if (hideUntil && Date.now() < parseInt(hideUntil, 10)) return false;
                return true;
            }

            function closePopup() {
                if (popupDontShow24 && popupDontShow24.checked) {
                    localStorage.setItem(POPUP_HIDE_KEY, String(Date.now() + 24 * 60 * 60 * 1000));
                    if (currentPopupVersion != null) localStorage.setItem(POPUP_VERSION_KEY, String(currentPopupVersion));
                }
                overlay.classList.remove('show');
            }

            function openPopup(settings) {
                currentPopupVersion = settings.version != null ? settings.version : null;
                var imgUrl = settings.image_url;
                if (imgUrl) imgUrl = imgUrl + (imgUrl.indexOf('?') >= 0 ? '&' : '?') + '_=' + Date.now();
                popupImage.src = imgUrl;
                popupImage.style.display = 'block';
                popupImage.alt = '팝업';
                popupImageLink.href = (settings.link_url && settings.link_url.trim()) ? settings.link_url : 'javascript:void(0);';
                if (!(settings.link_url && settings.link_url.trim())) popupImageLink.onclick = function(e) { e.preventDefault(); };
                overlay.classList.add('show');
            }

            if (popupClose) popupClose.addEventListener('click', closePopup);
            overlay.addEventListener('click', function(e) {
                if (e.target === overlay) closePopup();
            });
            var dontShowLabel = document.querySelector('.popup-dont-show');
            if (dontShowLabel) {
                dontShowLabel.addEventListener('click', function() {
                    setTimeout(closePopup, 50);
                });
            }

            fetch('/api/popup-settings')
                .then(function(r) { return r.json(); })
                .then(function(settings) {
                    if (settings.version != null && String(settings.version) !== localStorage.getItem(POPUP_VERSION_KEY)) {
                        localStorage.removeItem(POPUP_HIDE_KEY);
                        localStorage.setItem(POPUP_VERSION_KEY, String(settings.version));
                    }
                    if (shouldShowPopup(settings)) openPopup(settings);
                })
                .catch(function() {});
        })();
    </script>

    <!-- 율무의 꿀템추천 동적 로드 -->
    <script>
        (function() {
            var container = document.getElementById('honeyItemsContainer');
            if (!container) return;
            fetch('/api/honey-items')
                .then(function(r) { return r.json(); })
                .then(function(items) {
                    if (!Array.isArray(items) || items.length === 0) return;
                    var html = '';
                    for (var i = 0; i < items.length; i++) {
                        var item = items[i];
                        var linkUrl = (item.link_url && item.link_url.trim()) ? item.link_url : '#';
                        var imgUrl = (item.image_url && item.image_url.trim()) ? item.image_url : '';
                        if (imgUrl) imgUrl = imgUrl + (imgUrl.indexOf('?') >= 0 ? '&' : '?') + '_=' + Date.now();
                        var tags = [];
                        try { tags = typeof item.tags === 'string' ? JSON.parse(item.tags || '[]') : (item.tags || []); } catch (e) {}
                        var desc = (item.description || '').trim();
                        var tagClasses = ['tag-recommend', 'tag-quality', 'tag-love', 'tag-size', 'tag-stable', 'tag-satisfied', 'tag-regret'];
                        var tagsHtml = '';
                        for (var t = 0; t < tags.length; t++) {
                            var tagCls = 'ad-tag ' + tagClasses[Math.floor(Math.random() * tagClasses.length)];
                            tagsHtml += '<span class="' + escapeAttr(tagCls) + '">' + escapeHtml(String(tags[t])) + '</span>';
                        }
                        html += '<a href="' + escapeAttr(linkUrl) + '" target="_blank" rel="noopener noreferrer" class="coupang-ad-box">';
                        html += '<div class="ad-image">';
                        if (imgUrl) {
                            html += '<img src="' + escapeAttr(imgUrl) + '" alt="꿀템' + (item.id || (i+1)) + '" class="ad-product-image" onerror="this.style.display=\'none\'; if(this.nextElementSibling) this.nextElementSibling.style.display=\'flex\';">';
                            html += '<div class="ad-placeholder" style="display:none;"><i class="fas fa-image"></i><span>이미지 추가</span></div>';
                        } else {
                            html += '<div class="ad-placeholder"><i class="fas fa-image"></i><span>이미지 추가</span></div>';
                        }
                        html += '</div><div class="ad-content"><div class="ad-tags">' + tagsHtml + '</div>';
                        html += '<div class="ad-description">' + (desc ? escapeHtml(desc) : '') + '</div></div></a>';
                    }
                    container.innerHTML = html;
                })
                .catch(function() {});
            function escapeHtml(s) {
                var div = document.createElement('div');
                div.textContent = s;
                return div.innerHTML;
            }
            function escapeAttr(s) {
                return String(s).replace(/&/g, '&amp;').replace(/"/g, '&quot;').replace(/'/g, '&#39;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            }
        })();
    </script>

    <!-- Supabase -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</body>
</html>